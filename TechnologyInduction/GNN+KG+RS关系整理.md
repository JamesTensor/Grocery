# 一、基于知识图谱的智能推荐

以知识图谱作为边信息生成推荐的价值在于：一方面可以提供更准确的推荐；另一方面可以对推荐结果进行解释。

用知识图谱来做推荐，但不一定用GNN。



## 1. 基于embedding的方法（逐渐淘汰）

基本思想：将知识图谱中的节点和边在低维向量空间中得到嵌入表示，利用知识图谱丰富item/user的表示。

#### 1.1 基于embedding的方法分类(分类角度一)

- 基于翻译距离的模型（例如TransE、TransH、TransR、TransD等）：追求h + r = t

- 基于语义匹配的模型（例如RESCAL、DistMult、HolE、SME、NTN、MLP、NAM等）：将h/r/t输入到网络中进行训练学习

#### 1.2  基于embedding的方法分类（分类角度二根据知识图谱中是否包含user）

- 使用item graph（即知识图谱仅由item和相关feature构成）：代表方法有CKE、DKN、KSR等
  - 首先利用KGE算法生成item embedding；
  - 然后结合item的文本/视觉特征、user-item交互矩阵等信息构成完整的item表示；
  - 最后再单独计算user表示和得分函数。

- 使用user-item graph（即知识图谱由user、item和相关feature构成）：代表方法有CFKG、SHINE、DKFM等

  - 先用KGE算法将user和item嵌入到同一向量空间；
  - 再通过计算user和item的距离直接得到得分函数的值。

- 将KGE算法与GAN、贝叶斯框架结合：代表方法有KTGAN、BEM等

- 使用多任务学习策略联合训练推荐模块与其他任务：代表方法有KTUP、MKR、RCF等，似乎不带

  

重点：基于embedding的方法忽略了图中的信息连通模式，通常**无法为推荐结果提供解释。**





## **2. 基于path的方法**（逐渐淘汰）

基本思想：将知识图谱视为一个异构信息网络（user-item），考虑到user、item的连通相似性（语义相似性/结构对等性），进而提升推荐效果。其中，连通相似性的定义依赖meta-path结构（meta-path是连接两个实体的一条特定的路径）。

#### 2.1 基于path的方法分类（根据对path的不同利用方式）

- 基于path计算连通相似度，并作为正则项优化user、item的表示。
  - path可以预先指定（代表方法有Hete-MF、Hete-CF、HeteRec、HeteRec-p、FMG、SemRec等）
  - path可以借助外部知识库学习得到（代表方法有RuleRec等）
- 将所有/部分可能的path嵌入到低维空间，与user、item的表示共同训练，并发现对推荐影响最显著的path（连接模式）。
  - 代表性方法有MCRec、RKGE、KPRN、PGPR等



重点：基于path的方法有天生的可解释性，但早期的方法没有结合embedding的思想，对user/item的表示较为简单，准确性仍有提升空间。得到path后使用word2vec，没有用GNN。





## 3. 联合方法（逐渐主流，使用GNN）

基本思想：**利用嵌入传播（常使用GNN）**完善user、item在知识图谱中有多跳邻居的表示。其中，传播过程可以看作是在知识图谱中发现user的偏好模式，类似于在基于path的方法中发现连接模式。

#### 3.1 联合方法分类（根据知识图谱中是否包含user）

- 使用item graph
  - 基于user波纹集传播user偏好，模拟用户兴趣在知识图谱上的传播过程，提升user表示能力（代表方法有RippleNet、AKUPM等）
  - 基于K阶邻居（实体波纹集）传播item属性，丰富item表示（代表方法有KGCN等）
- 使用user-item graph
  - 考虑user和item的高阶交互，同时增强user和item的表示（代表方法有KGAT、KNI、IntentGC等）

联合方法结合了基于embedding和基于path的方法，兼具准确性和可解释性，逐渐成为知识图谱推荐算法的主流方法。





## 4. 结合知识图谱特征学习的推荐系统分类

前面三节是以核心技术的角度来分类，本节以训练学习的角度来分类。（分类角度不同而已，助于理解）

#### 4.1 依次训练学习（例如DKN等）

#### 4.2 联合训练学习（例如CKE、Ripple Network等）

#### 4.3 交替训练学习（例如MKR等）











# 二、基于图网络的智能推荐

用GNN做推荐但不一定用KG。

### 1. 知识图谱表示学习KGE与图网络表示学习的异同点

- 知识图谱表示学习中常常提到的一个概念就是三元组（头实体，关系，尾实体），但图网络表示学习中没有这个概念，对所有结点是一视同仁的。
- 知识图谱表示学习强调节点之间的关系表示，图网络表示学习强调节点的结构表示。(后来引入path的知识图谱一定层面上是在考虑图网络的结构)
- 知识图谱表示学习方法和图网络表示学习方法都是受word2vec启发衍生出来的。
  - 知识图谱表示学习启发于word2vec向量之间存在的关联性
  - 图网络表示学习启发于word2vec由中心词预测上下文的文本处理方式

- 两者可以相互借鉴，例如将random walk思想应用于知识图谱，将Trans思想应用于网络表示。

  

### 2. 图网络表示学习（network representation/embedding）

- 基于矩阵分解的模型，比如SVD分解等，个人感觉不行

- 基于随机游走的模型，比如DeepWalk、Node2vec等，个人感觉不行

  DeepWalk的主要思想是在由物品组成的图结构上进行随机游走，产生大量物品序列，然后将这些物品序列作为训练样本输入word2vec进行训练，得到物品的embedding。

  在DeepWalk的基础上，通过调整随机游走权重的方法，使embedding的结果在网络的**同质性**和**结构性**中进行权衡。

  其中，网络的“同质性”指的是距离相近节点的embedding应该尽量近似，“结构性”指的是结构上相似的节点的embedding应该尽量接近。

- 基于深度学习的模型（与下文的图神经网络呼应）：CNN、RNN、AE、GNN、GCN、结合注意力、结合强化学习、结合GAN等。个人感觉行



### 3. 图神经网络

#### 3.1 图神经网络GNN

GNN的局限性：

- 一是没有区分不同边的功能
- 二是节点之间的状态存在较多的信息共享，导致节点的状态太过平滑，并且属于节点自身的特征信息匮乏

#### 3.3 图卷积神经网络GCN

思考如何解决图中邻居结点数量不固定的问题：

- 一是提出一种方式把非欧空间转换成欧式空间
- 二是找到一种可以处理变长邻居节点的卷积核在图上抽取信息

#### 3.4 GraphSage

解决GCN需要存放整张图信息的问题，利用采样部分节点的方式进行学习。

#### 3.6 异质图神经网络：

知识图谱在实际应用中往往就是异质图神经网络。







# 三、知识图谱与图神经网络的相关问题探究

### 1. 图神经网络是如何处理类似知识图谱的有向异构图的？

- GCN是谱域的GNN：基于谱图理论，无法天然的处理有向图。
- GAT是空域的GNN：可以天然的处理有向图，通常定义入度的节点进行聚合。
- 知识图谱和异质图都有专门设计的GNN：
  - 知识图谱上的GNN关注于了对于不同关系含义的区别。
  - 异质图上的GNN关注于多种不同关系的融合来更好的描述节点。





图神经网络在推荐系统中的应用。

主要方式：

1）没有额外信息，对user-item interactions构成的graph使用。

2）加入knowledge graph，对knowledge graph使用。

3）加入user social network，对user social network使用。

4）将user sequential behaviors构建成graph，对该graph使用。也就是按session来取用户行为序列。











